<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Medical Mission Database</title>
        <link rel="shortcut icon" type="image/png" href="images/missiondb64.png"/>
        <link rel="stylesheet" href="style/base.css">
        <link rel="manifest" href="manifest.json">
    </head>
    <body>
        <header class="work_screen">
            <div id="headerbox">
                <div id="headerboxlink"><a href="https://www.github.com/alfille/missiondb" target="_blank" title="Go to MissionDb program website"><h1>Mission<br>Database</h1></a></div>
                <div id="buttonheader">
                    <!-- top: UserName MainMenu -->
                    <div class="UserName MainMenu pageOverlay">
                    </div>
                    <!-- top: Download -->
                    <div class="Download pageOverlay">
                        <button type="button" class="divbutton" onclick="showPage( 'MainMenu' )">Main Menu</button>
                    </div>
                    <!-- top: SettingMenu -->
                    <div class="SettingMenu pageOverlay">
                        <button type="button" class="divbutton edit_note" onclick="objectPatientData.clickEdit()">Edit</button>
                        <button type="button" class="divbutton savedata" onclick="objectPatientData.savePatientData()">Save Changes</button>
                        <button type="button" class="divbutton return" onclick="showPage( 'PatientList' )">Cancel</button>
                    </div>
                    <!-- top: PatientList -->
                    <div class="PatientList pageOverlay">
                        <button type="button" class="divbutton" onclick="showPage( 'MainMenu' )">Main Menu</button>
                        <button type="button" class="divbutton" onclick="showPage( 'PatientNew' )">Add Patient</button>
                        <button type="button" class="divbutton" onclick="showPage( 'PatientPhoto' )" id="editreviewpatient">Review/Edit Patient</button>
                    </div>
                    <!-- top: OperationList -->
                    <div class="OperationList pageOverlay">
                        <button type="button" class="divbutton" onclick="showPage( 'OperationNew' )">Add Operation</button>
                        <button type="button" class="divbutton" onclick="showPage( 'OperationEdit' )" id="editreviewoperation">Review/Edit Operation</button>
                        <button type="button" class="divbutton return" onclick="showPage( 'PatientPhoto' )">Return</button>
                    </div>
                    <!-- top: PatientPhoto -->
                    <div class="PatientPhoto pageOverlay">
                        <button type="button" class="divbutton return" onclick="showPage( 'PatientList' )">Return</button>
                    </div>
                    <!-- top: PatientNew -->
                    <div class="PatientData PatientNew pageOverlay">
                        <button type="button" class="divbutton edit_note" onclick="objectPatientData.clickEdit()">Edit</button>
                        <button type="button" class="divbutton savedata" onclick="objectPatientData.savePatientData()">Add Patient</button>
                        <button type="button" class="divbutton discarddata return" onclick="showPage( 'PatientList' )">Cancel</button>
                    </div>
                    <!-- top: PatientDemographics PatientMedical -->
                    <div class="PatientData PatientDemographics PatientMedical pageOverlay">
                        <button type="button" class="divbutton edit_note" onclick="objectPatientData.clickEdit()">Edit</button>
                        <button type="button" class="divbutton savedata" onclick="objectPatientData.savePatientData()">Save Changes</button>
                        <button type="button" class="divbutton return" onclick="showPage( 'PatientPhoto' )">Cancel</button>
                    </div>
                    <!-- top: OperationEdit -->
                    <div class="PatientData OperationEdit pageOverlay">
                        <button type="button" class="divbutton edit_note" onclick="objectPatientData.clickEdit()">Edit</button>
                        <button type="button" class="divbutton savedata" onclick="objectPatientData.savePatientData()">Save Changes</button>
                        <button type="button" class="divbutton delete" onclick="deleteOperation()">Delete Operation</button>
                        <button type="button" class="divbutton return" onclick="showPage( 'OperationList' )">Cancel</button>
                    </div>
                    <!-- top: InvalidPatient -->
                    <div class="InvalidPatient pageOverlay">
                        <button type="button" class="divbutton return" onclick="showPage( 'PatientList' )">Return</button>
                    </div>
                    <!-- top: NoteList -->
                    <div class="NoteList pageOverlay">
                        <button class="create_note libutton divbutton" type="button" onclick="showPage( 'NoteNew' )">New Note</button>
                        <button class="createtheimage libutton divbutton" type="button" onclick="quickImage()" title="Quick picture">&#128247;</button>
                        <button class="returnfromnote libutton divbutton return" type="button" onclick="showPage( 'PatientPhoto' )">Return</button>
                    </div>
                </div>
            </div>
            <div id="titlebox">
            </div>
        </header>
        <div id="missiondbody" class="work_screen">
            <!-- body: UserName -->
            <div class="UserName pageOverlay">
                <div id="UserNameContent" >
                    <div>
                        <hr>
                        <label for="UserNameText">User name:</label><input type="text" required="true" id="UserNameText" title="Enter your User Name">
                        <button type="button" class="divbutton" onclick="UserNameInput()">Enter</button>
                        <hr>
                    </div>
                </div>
            </div>
            <!-- body: MainMenu -->
            <div class="MainMenu pageOverlay">
                <div id="MainMenuContent" >
                    <button type="button" class="divbutton" onclick="showPage( 'PatientList' )">Patient List</button>
                    <button type="button" class="divbutton" onclick="showPage( 'SettingMenu' )">Settings</button>
                    <button type="button" class="divbutton" onclick="showPage( 'Download' )">Download</button>
                    <button type="button" class="divbutton" onclick="createIndexes()">DesignIndex</button>
                    <button type="button" class="divbutton" onclick="testScheduleIndex()">CreateIndex</button>
                </div>
            </div>
            <!-- body: Download -->
            <div class="Download pageOverlay">
                <div id="MainMenuContent" >
                    <h3>Download Spreadsheet file</h3>
                    <button type="button" class="divbutton" onclick="downloadPatients()">Patient List</button>
                    <button type="button" class="divbutton" onclick="downloadAll()">All data</button>
                </div>
            </div>
            <!-- body: PatientList -->
            <div class="PatientList pageOverlay">
                <div id="PatientListContent" >
                    <table id="PatientList"></table>
                </div>
            </div>
            <!-- body: OperationList -->
            <div class="OperationList pageOverlay">
                <div id="OperationListContent" >
                    <table id="OperationsList"></table>
                </div>
            </div>
            <!-- body: PatientNew PatientDemographics PatientMedical OperationEdit SettingMenu -->
            <div class="PatientData PatientNew PatientDemographics PatientMedical OperationEdit SettingMenu pageOverlay">
                <div id="PatientDataContent" ></div>
            </div>
            <!-- body: PatientPhoto -->
            <div class="PatientPhoto pageOverlay">
                <div id="PatientPhotoContent" >
                    <img class="entryfield_image" onclick="ShowBigPicture(this)">
                    <div class="entryfield_text">
                        <button class="edit_note libutton" type="button" onClick="photoBar.startedit()">Edit</button>
                        Patient Photo
                    </div>
                </div>
                <div id="PatientPhotoButtons">
                    <div class="PatientProcButtons">
                        <button type="button" class="divbutton" onclick="showPage( 'PatientDemographics' )">Demographics</button>
                        <button type="button" class="divbutton" onclick="showPage( 'PatientMedical' )">Medical</button>
                    </div>
                    <div class="PatientProcButtons" id="ProcList">
                        <button type="button" class="divbutton" onclick="showPage( 'NoteList' )">Notes</button>
                        <button type="button" class="divbutton" onclick="showPage( 'OperationList' )">Operations</button>
                    </div>
                    <div class="PatientProcButtons">
                        <button type="button" class="divbutton" onclick="printCard()">Print Card</button>
                        <button type="button" class="divbutton delete" onclick="deletePatient()">Delete Patient</button>
                    </div>
                </div>
            </div>
            <!-- body: InvalidPatient -->
            <div class="InvalidPatient pageOverlay">
                <div id="InvalidPatientContent" >
                    <H2>Not a valid patient ID</H2>
                    <p>Possble causes include your data not yet synced, or changes since this patient was selected</p>
                </div>
            </div>
            <!-- body: NoteList -->
            <div class="NoteList pageOverlay">
                <div id="NoteListContent"></div>
            </div>
            <!-- body: NoteNew (quick note) -->
            <div class="NoteNew pageOverlay">
                <div id="NoteNewContent">
                    <img id="NoteNewImage" class="entryfield_image" onclick="ShowBigPicture(this)">
                    <label for="NoteNewText" id="NoteNewLabel"></label>
                    <div id="NoteNewText" class="editable"></div>
                </div>
            </div>
            <!-- body: NoteImage (quick photo) -->
            <div class="NoteImage pageOverlay">
                <input type="file" accept="image/*" id="imageInput" onchange="handleImage()" capture="environment">
                <input type="file" accept="image/*" id="imageQ" onchange="quickImage2()" capture="environment">
                <button type="button" class="divbutton" onclick="getImage()">&#128247; or &#119809;
                u&#818; Gallery</button>
                <button type="button" class="divbutton" onclick="showPage( 'NoteList' )">Cancel</button>
            </div>
            <!-- body: NoteImage2 (quick photo) -->
            <div class="NoteImage2 pageOverlay">
                <div id="NoteImage2Content" ></div>
                <img id="imageCheck" class="entryfield_image" onclick="ShowBigPicture(this)">
                <label for="annotation">Image notes (optional)</label>
                <div id="annotation" class="editable"></div>
                <button type="button" class="divbutton" onclick="saveImage()">Save</button>
                <button type="button" class="divbutton" onclick="showPage( 'NoteList' )">Cancel</button>
            </div>
            <!-- body: FloatPicture -->
            <img class="FloatPicture pageOverlay" onclick="HideBigPicture(this)">
        </div>
        <!-- copyable parts -->
        <div id="templates" class="pageOverlay">
            <div class="editToolbar">
                <button type="button" onclick="editBar.saveedit()"><span><B>Save</B></span></button>
                <button type="button" onclick="editBar.leave('NoteList')"><span><B>Cancel</B></span></button>
                <button type="button" onclick="editBar.getImage()" title="Get image"><span><B>&#128247;</B></span></button>            
                <button type="button" onclick="editBar.removeImage()" class="tbarxpic" title="Remove image"><span><B>&#128473;&#128247;</B></span></button>
                <button type="button" onclick="editBar.deleteedit()" class="tbardel delete" title="Delete note"><span><B>Delete</B></span></button>
                <input type="file" accept="image/*" class="imageBar" onchange="editBar.handleImage()" capture="environment">
            </div>
            <div class="photoToolbar">
                <button type="button" onclick="photoBar.saveedit()"><span><B>Save</B></span></button>
                <button type="button" onclick="photoBar.leave('PatientPhoto')"><span><B>Cancel</B></span></button>
                <button type="button" onclick="photoBar.getImage()" title="Get image"><span><B>&#128247;</B></span></button>            
                <button type="button" onclick="photoBar.removeImage()" class="tbarxpic" title="Remove image"><span><B>&#128473;&#128247;</B></span></button>
                <input type="file" accept="image/*" class="imageBar" onchange="photoBar.handleImage()" capture="environment">
            </div>
           <button class="edit_note libutton" type="button">Edit</button>
            <div id="phototemplate">
                <img class="entryfield_image" onclick="ShowBigPicture(this)">
                <div class="entryfield_text">
                    <button class="edit_note libutton" type="button" onClick="photoBar.startedit()">Edit</button>
                    Patient Photo
                </div>
            </div>
            <fieldset><legend><button type="button" value="show" onclick="objectPatientData.fsclick(this)">&#10134;</button></legend></fieldset>
        </div>
        <!-- Footer -->
        <footer class="work_screen">
            <div id="footerflex">
                <div><label for="userstatus">User:</label><input type="text" readonly id="userstatus"></div>
                <div><label for="syncstatus">Sync status:</label><input type="text" readonly id="syncstatus"></div>
            </div>
        </footer>
        <!-- Card print -->
        <div class="print_screen">
            <div id="printCard">
                <div class=rowCard>
                    <div><img id="photoCard" src="images/missiondb192.png" alt="Patient photo" height=180 width=180></div>
                    <div><canvas class="qrCard" height=180 width=180></canvas></div>
                </div>
                <div class=rowCard>
                    <div><table>
                        <tr><td>Patient name</td><td></td></tr>
                        <tr><td>Complaints</td><td></td></tr>
                        <tr><td>Procedure</td><td></td></tr>
                        <tr><td>Length</td><td></td></tr>
                        <tr><td>Surgeon</td><td></td></tr>
                        <tr><td>ASA</td><td></td></tr>
                    </table></div>
                </div>
                <div class=rowCard>
                    <div><table>
                        <tr><td>Age</td><td></td></tr>
                        <tr><td>Sex</td><td></td></tr>
                        <tr><td>Weight</td><td></td></tr>
                        <tr><td>Allergies</td><td></td></tr>
                        <tr><td>Meds</td><td></td></tr>
                        <tr><td>Equipment</td><td></td></tr>
                    </table></div>
                </div>
            </div>
        </div>
        <!-- Splash screen -->
        <div id="splash_screen">
            <b><center>
            <h1>Mission Database</h1>
            <img src="images/missiondb512.png" alt="MissionDb Medical Mission patient database">
            <hr>
                If the application does not appear, contact:.<br>
                <a href="mailto:palfille@partners.org?subject=missiondb error">missiondb development team</a>
            <hr>
            </center></b>
        </div>
        
        <!-- scripts -->
        <!-- pouchdb --> <script src="js/pouchdb-7.2.1.min.js"></script>
        <!-- qr --> <script src="js/qrenc-4.0.0.min.js"></script>
        <!-- datepicker --> <script src="js/datepicker.js"></script>
        <!-- timepicker --> <script src="js/time-pick.js"></script>
        <!-- length --> <script src="js/length-pick.js"></script>
        <!-- load service workers --> <script src="js/base.js"></script>
        <!-- application code --> <script src="js/app.js"></script>
    </body>
</html>
